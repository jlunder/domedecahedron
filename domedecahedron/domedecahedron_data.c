#include "domedecahedron.h"


// (1.0 + sqrt(5.0)) / 2.0
#define PHI (1.618033988749895f)
// 2.0 / (1.0 + sqrt(5.0))
#define IPHI (0.6180339887498948f)

// These vertices are given in the standard threading order
//    { 0.0f, -IPHI,   PHI},
//    { 0.0f,  IPHI,   PHI},
//    {-1.0f,  1.0f,  1.0f},
//    { -PHI,  0.0f,  IPHI},
//    {-1.0f, -1.0f,  1.0f},
//    {-IPHI,  -PHI,  0.0f},
//    {-1.0f, -1.0f, -1.0f},
//    { -PHI,  0.0f, -IPHI},
//    {-1.0f,  1.0f, -1.0f},
//    {-IPHI,   PHI,  0.0f},
//    { IPHI,   PHI,  0.0f},
//    { 1.0f,  1.0f,  1.0f},
//    {  PHI,  0.0f,  IPHI},
//    { 1.0f, -1.0f,  1.0f},
//    { IPHI,  -PHI,  0.0f},
//    { 1.0f, -1.0f, -1.0f},
//    { 0.0f, -IPHI,  -PHI},
//    { 0.0f,  IPHI,  -PHI},
//    { 1.0f,  1.0f, -1.0f},
//    {  PHI,  0.0f, -IPHI},

// normalized to unit radius
//    {0.0f, -0.35682208977309f, 0.9341723589627159f},
//    {0.0f, 0.35682208977309f, 0.9341723589627159f},
//    {-0.5773502691896258f, 0.5773502691896258f, 0.5773502691896258f},
//    {-0.9341723589627159f, 0.0f, 0.35682208977309f},
//    {-0.5773502691896258f, -0.5773502691896258f, 0.5773502691896258f},
//    {-0.35682208977309f, -0.9341723589627159f, 0.0f},
//    {-0.5773502691896258f, -0.5773502691896258f, -0.5773502691896258f},
//    {-0.9341723589627159f, 0.0f, -0.35682208977309f},
//    {-0.5773502691896258f, 0.5773502691896258f, -0.5773502691896258f},
//    {-0.35682208977309f, 0.9341723589627159f, 0.0f},
//    {0.35682208977309f, 0.9341723589627159f, 0.0f},
//    {0.5773502691896258f, 0.5773502691896258f, 0.5773502691896258f},
//    {0.9341723589627159f, 0.0f, 0.35682208977309f},
//    {0.5773502691896258f, -0.5773502691896258f, 0.5773502691896258f},
//    {0.35682208977309f, -0.9341723589627159f, 0.0f},
//    {0.5773502691896258f, -0.5773502691896258f, -0.5773502691896258f},
//    {0.0f, -0.35682208977309f, -0.9341723589627159f},
//    {0.0f, 0.35682208977309f, -0.9341723589627159f},
//    {0.5773502691896258f, 0.5773502691896258f, -0.5773502691896258f},
//    {0.9341723589627159f, 0.0f, -0.35682208977309f},

// normalized and rotated so the top face is in a plane
vertex_t const ddh_dodecahedron_vertex_coords[
        DDH_VERTICES_PER_DODECAHEDRON] = {
    {0.491123473188f, -0.356822089773f, 0.794654472292f},
    {0.491123473188f, 0.356822089773f, 0.794654472292f},
    {-0.187592474085f, 0.57735026919f, 0.794654472292f},
    {-0.607061998207f, 0.0f, 0.794654472292f},
    {-0.187592474085f, -0.57735026919f, 0.794654472292f},
    {-0.303530999103f, -0.934172358963f, 0.187592474085f},
    {-0.794654472292f, -0.57735026919f, -0.187592474085f},
    {-0.982246946377f, 0.0f, 0.187592474085f},
    {-0.794654472292f, 0.57735026919f, -0.187592474085f},
    {-0.303530999103f, 0.934172358963f, 0.187592474085f},
    {0.303530999103f, 0.934172358963f, -0.187592474085f},
    {0.794654472292f, 0.57735026919f, 0.187592474085f},
    {0.982246946377f, 0.0f, -0.187592474085f},
    {0.794654472292f, -0.57735026919f, 0.187592474085f},
    {0.303530999103f, -0.934172358963f, -0.187592474085f},
    {0.187592474085f, -0.57735026919f, -0.794654472292f},
    {-0.491123473188f, -0.356822089773f, -0.794654472292f},
    {-0.491123473188f, 0.356822089773f, -0.794654472292f},
    {0.187592474085f, 0.57735026919f, -0.794654472292f},
    {0.607061998207f, 0.0f, -0.794654472292f},
};


vertex_t const ddh_vertex_coords[DDH_TOTAL_VERTICES] = {
#include "data/coords.h"
};

uint8_t const ddh_dodecahedron_vertex_adjacency[
        DDH_VERTICES_PER_DODECAHEDRON][3] = {
    { 1,  4, 13},
    { 0,  2, 11},
    { 1,  3,  9},
    { 2,  4,  7},
    { 0,  3,  5},
    { 4,  6, 14},
    { 5,  7, 16},
    { 3,  6,  8},
    { 7,  9, 17},
    { 2,  8, 10},
    { 9, 11, 18},
    { 1, 10, 12},
    {11, 13, 19},
    { 0, 12, 14},
    { 5, 13, 15},
    {14, 16, 19},
    { 6, 15, 17},
    { 8, 16, 18},
    {10, 17, 19},
    {12, 15, 18},
};

uint8_t const ddh_dodecahedron_vertex_opposition[
        DDH_VERTICES_PER_DODECAHEDRON] = {
    17, 16, 15, 19, 18, 10, 11, 12, 13, 14, 5, 6, 7, 8, 9, 2, 1, 0, 4, 3,
};

uint8_t const ddh_dodecahedron_face_vertices[DDH_FACES_PER_DODECAHEDRON][
        DDH_VERTICES_PER_FACE] = {
    { 0,  4,  3,  2,  1},
    { 3,  4,  5,  6,  7},
    { 2,  3,  7,  8,  9},
    { 1,  2,  9, 10, 11},
    { 0,  1, 11, 12, 13},
    { 0, 13, 14,  5,  4},
    { 5, 14, 15, 16,  6},
    {12, 19, 15, 14, 13},
    {10, 18, 19, 12, 11},
    { 8, 17, 18, 10,  9},
    { 6, 16, 17,  8,  7},
    {15, 19, 18, 17, 16},
};

uint8_t const ddh_dodecahedron_vertex_faces[DDH_VERTICES_PER_DODECAHEDRON][
        DDH_VERTICES_PER_FACE] = {
    { 0,  4,  5}, { 0,  3,  4}, { 0,  2,  3}, { 0,  1,  2},
    { 0,  1,  5}, { 1,  5,  6}, { 1,  6, 10}, { 1,  2, 10},
    { 2,  9, 10}, { 2,  3,  9}, { 3,  8,  9}, { 3,  4,  8},
    { 4,  7,  8}, { 4,  5,  7}, { 5,  6,  7}, { 6,  7, 11},
    { 6, 10, 11}, { 9, 10, 11}, { 8,  9, 11}, { 7,  8, 11},
};

uint8_t const ddh_dodecahedron_face_adjacency[DDH_FACES_PER_DODECAHEDRON][5] = {
};
uint8_t const ddh_dodecahedron_face_opposition[DDH_FACES_PER_DODECAHEDRON] = {
};

size_t ddh_group_dodecahedron_vertex_offsets[DDH_TOTAL_GROUPS][
        DDH_DODECAHEDRONS_PER_GROUP][DDH_VERTICES_PER_DODECAHEDRON];

//uint8_t const ddh_group_adjacencies[DDH_TOTAL_GROUPS][2];
uint8_t const ddh_dodecahedron_adjacencies[DDH_TOTAL_DODECAHEDRONS] = {
};

uint8_t const ddh_light_dodecahedron[DDH_TOTAL_VERTICES] = {
     0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,
     0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,
     1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,
     2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,
     0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,
     1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,
     2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,
     0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,
     1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,
     2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,
};

uint8_t const ddh_light_vertex[DDH_TOTAL_VERTICES] = {
     0,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19,
     0,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19,
     0,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19,
     0,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19,
     0,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19,
     0,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19,
     0,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19,
     0,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19,
     0,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19,
     0,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19,
};

uint8_t const ddh_light_group[DDH_TOTAL_VERTICES] = {
     3,  3,  3,  3,  3,  3,  3,  3,  3,  3,  3,  3,  3,  3,  3,  3,  3,  3,  3,  3,
     0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,
     0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,
     0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,
     1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,
     1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,
     1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,
     2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,
     2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,
     2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,
};

